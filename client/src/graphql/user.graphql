fragment STUserIndetificationFragment on STUserIndetification {
    uid
    nickName
    locale
    photoURL
    accountCreatedDate
}

fragment STUserPublicDataFragment on STUserPublicData {
    uid
    nickName
    locale
    photoURL
    accountCreatedDate
    lastSignInDate
    portfolioCash
    rank {
        ...STRankFragment
    }
    holdings {
        ...STTransactionFragment,
    }
    transactionsSnippets {
        ...STTransactionFragment
    }
    activity
    latestPortfolioChange {
        ...STPortfolioChangeFragment
    }

}

query AuthenticateUser($uid: String!) {
    authenticateUser(uid: $uid) {
        uid
        nickName
        locale
        photoURL
        accountCreatedDate
        lastSignInDate
        portfolioCash
        rank {
            ...STRankFragment
        }
        transactionsSnippets {
            ...STTransactionFragment
        }
        holdings {
            ...STTransactionFragment,
            summary{
                ...StockSummaryFragment
            },
        }
        groups {
            groupInvitationSent {
                ...STGroupPartialDataFragment
            }
            groupInvitationReceived {
                ...STGroupPartialDataFragment
            }
            groupOwner {
                ...STGroupPartialDataFragment
            }
            groupMember {
                ...STGroupPartialDataFragment
            }
        }
        activity
        userHistoricalData {
            userLogs {
                ...STLogsFragment
            }
            resetedAccount {
                date
                portfolioTotal
            }
            bestAchievedRanks {
                ...STRankFragment
            }
            portfolioChange {
                ...STPortfolioChangeFragment
            }
        }
        userPrivateData {
            tradingEnabledDate
            finnhubKey
            roles
            email
            displayName
            providerId
            status
            nicknameLastChange
        }
        stockWatchlist {
            ...STStockWatchlistFragment
        }
    }
}


query QueryUserPublicDataByUsername($usernamePrefix: String!) {
    queryUserPublicDataByUsername(usernamePrefix: $usernamePrefix) {
        ...STUserPublicDataFragment
    }
}



# -------------------------------------------------------
# MUTATIONS
mutation RegisterUser($stUserAuthenticationInput: STUserAuthenticationInput!) {
    registerUser(user: $stUserAuthenticationInput)
}

mutation EditUser($editInput: STUserEditDataInput!) {
    editUser(editInput: $editInput)
}

mutation ResetUserAccount($userId: String!) {
    resetUserAccount(userId: $userId) {
        date
        portfolioTotal
    }
}

