fragment STUserIndentificationData on STUserPublicData {
	id
	nickName
	locale
	photoURL
	accountCreatedDate
	lastSignInDate
	portfolio {
		...STPortfolioWrapperFragment
	}
}

fragment StGroupMemberOverview on STUserPublicData {
	nickName
	locale
	photoURL
	accountCreatedDate
	lastSignInDate
	portfolio {
		...STPortfolioWrapperFragment
	}
	rank {
		...STRankFragment
	}
	transactionsSnippets {
		...STTransactionFragment
	}
	holdings {
		...STHoldingFragment
	}
	activity
	userHistoricalData {
		userLogs {
			...STLogsFragment
		}
		resetedAccount {
			date
			portfolioTotal
		}
		bestAchievedRanks {
			...STRankFragment
		}
		portfolioSnapshots {
			...STPortfolioSnapshotFragment
		}
		transactionSnapshots {
			...STTransactionSnapshotFragment
		}
	}
}

fragment StUserPublicDataSearch on STUserPublicData {
	nickName
	locale
	photoURL
	accountCreatedDate
	lastSignInDate
	portfolio {
		...STPortfolioWrapperFragment
	}
	rank {
		...STRankFragment
	}
	transactionsSnippets {
		...STTransactionFragment
	}
	holdings {
		...STHoldingFragment
	}
	activity
	userHistoricalData {
		userLogs {
			...STLogsFragment
		}
		resetedAccount {
			date
			portfolioTotal
		}
		bestAchievedRanks {
			...STRankFragment
		}
		portfolioSnapshots {
			...STPortfolioSnapshotFragment
		}
		transactionSnapshots {
			...STTransactionSnapshotFragment
		}
	}
	groups {
		groupOwner {
			...STGroupIdentificationData
		}
		groupMember {
			...STGroupIdentificationData
		}
	}
}

query AuthenticateUser($id: String!) {
	authenticateUser(id: $id) {
		id
		nickName
		locale
		photoURL
		accountCreatedDate
		lastSignInDate
		portfolio {
			...STPortfolioWrapperFragment
		}
		rank {
			...STRankFragment
		}
		transactionsSnippets {
			...STTransactionFragment
		}
		holdings {
			...STHoldingFragment
		}
		groups {
			groupInvitationSent {
				...STGroupIdentificationData
			}
			groupInvitationReceived {
				...STGroupIdentificationData
			}
			groupOwner {
				...STGroupIdentificationData
			}
			groupMember {
				...STGroupIdentificationData
			}
		}
		activity
		userHistoricalData {
			userLogs {
				...STLogsFragment
			}
			resetedAccount {
				date
				portfolioTotal
			}
			bestAchievedRanks {
				...STRankFragment
			}
			portfolioSnapshots {
				...STPortfolioSnapshotFragment
			}
			transactionSnapshots {
				...STTransactionSnapshotFragment
			}
		}
		userPrivateData {
			tradingEnabledDate
			finnhubKey
			roles
			email
			displayName
			providerId
			status
			nicknameLastChange
		}
		stockWatchlist {
			...STStockWatchlistFragment
		}
	}
}

query QueryUserIdentificationByUsername($usernamePrefix: String!) {
	queryUserPublicDataByUsername(usernamePrefix: $usernamePrefix) {
		...STUserIndentificationData
	}
}

query QueryStGroupMemberOverviewById($id: String!) {
	queryUserPublicDataById(id: $id) {
		...StGroupMemberOverview
	}
}

query QueryStUserPublicDataSearchById($id: String!) {
	queryUserPublicDataById(id: $id) {
		...StUserPublicDataSearch
	}
}

# -------------------------------------------------------
# MUTATIONS
mutation RegisterUser($stUserAuthenticationInput: STUserAuthenticationInput!) {
	registerUser(user: $stUserAuthenticationInput)
}

mutation EditUser($editInput: STUserEditDataInput!) {
	editUser(editInput: $editInput)
}

mutation ResetUserAccount($userId: String!) {
	resetUserAccount(userId: $userId) {
		date
		portfolioTotal
	}
}
