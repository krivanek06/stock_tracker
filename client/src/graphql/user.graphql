fragment StUserIndetificationFragment on STUserIndetification {
	id
	nickName
	locale
	photoURL
	accountCreatedDate
}

fragment StUserIndetificationBaseFragment on STUserIndetificationBase {
	nickName
	locale
	photoURL
	accountCreatedDate
}

fragment STUserIndentificationData on STUserPublicData {
	id
	nickName
	locale
	photoURL
	accountCreatedDate
	lastSignInDate
	portfolio {
		...STPortfolioWrapperFragment
	}
}

fragment StGroupMemberOverview on STUserPublicData {
	nickName
	locale
	photoURL
	accountCreatedDate
	lastSignInDate
	portfolio {
		...STPortfolioWrapperFragment
	}
	rank {
		...STRankFragment
	}
	transactionsSnippets {
		...STTransactionFragment
	}
	topTransactions {
		...STTransactionFragment
	}
	holdings {
		...STHoldingFragment
	}
	activity
	userHistoricalData {
		userLogs {
			...STLogsFragment
		}
		resetedAccount {
			date
			portfolioTotal
		}
		bestAchievedRanks {
			...STRankFragment
		}
		portfolioSnapshots {
			...STPortfolioSnapshotFragment
		}
		transactionSnapshots {
			...STTransactionSnapshotFragment
		}
	}
}

fragment StUserPublicDataSearch on STUserPublicData {
	nickName
	locale
	photoURL
	accountCreatedDate
	lastSignInDate
	portfolio {
		...STPortfolioWrapperFragment
	}
	portfolioRisk {
		...STPortfolioRiskCalculationsFragment
	}
	rank {
		...STRankFragment
	}
	transactionsSnippets {
		...STTransactionFragment
	}
	topTransactions {
		...STTransactionFragment
	}
	holdings {
		...STHoldingFragment
	}
	activity
	userHistoricalData {
		userLogs {
			...STLogsFragment
		}
		resetedAccount {
			date
			portfolioTotal
		}
		bestAchievedRanks {
			...STRankFragment
		}
		portfolioSnapshots {
			...STPortfolioSnapshotFragment
		}
		transactionSnapshots {
			...STTransactionSnapshotFragment
		}
	}
	groups {
		groupOwner {
			...STGroupIdentificationData
		}
		groupMember {
			...STGroupIdentificationData
		}
	}
}

fragment StUserPrivateData on STUserPrivateData {
	tradingEnabledDate
	finnhubKey
	roles
	email
	displayName
	providerId
	status
	nicknameLastChange
}

fragment StUserDataAdmin on STUserPublicData {
	...STUserIndentificationData
	portfolioRisk {
		...STPortfolioRiskCalculationsFragment
	}
	rank {
		...STRankFragment
	}
	transactionsSnippets {
		...STTransactionFragment
	}
	topTransactions {
		...STTransactionFragment
	}
	holdings {
		...STHoldingInfoFragment
	}
	stockWatchlist {
		...STStockWatchlistIntoFragment
	}
	groups {
		groupInvitationSent {
			...STGroupIdentificationData
		}
		groupInvitationReceived {
			...STGroupIdentificationData
		}
		groupOwner {
			...STGroupIdentificationData
		}
		groupMember {
			...STGroupIdentificationData
		}
		groupWatched {
			...STGroupIdentificationData
		}
	}
	userHistoricalData {
		userLogs {
			...STLogsFragment
		}
		resetedAccount {
			date
			portfolioTotal
		}
	}
	userPrivateData {
		...StUserPrivateData
	}
}

query AuthenticateUser($id: String!) {
	authenticateUser(id: $id) {
		id
		nickName
		locale
		photoURL
		accountCreatedDate
		lastSignInDate
		portfolio {
			...STPortfolioWrapperFragment
		}
		portfolioRisk {
			...STPortfolioRiskCalculationsFragment
		}
		rank {
			...STRankFragment
		}
		transactionsSnippets {
			...STTransactionFragment
		}
		topTransactions {
			...STTransactionFragment
		}
		holdings {
			...STHoldingFragment
		}
		groups {
			groupInvitationSent {
				...STGroupIdentificationData
			}
			groupInvitationReceived {
				...STGroupIdentificationData
			}
			groupOwner {
				...STGroupIdentificationData
			}
			groupMember {
				...STGroupIdentificationData
			}
			groupWatched {
				...STGroupIdentificationData
			}
		}
		activity
		userHistoricalData {
			userLogs {
				...STLogsFragment
			}
			resetedAccount {
				date
				portfolioTotal
			}
			bestAchievedRanks {
				...STRankFragment
			}
			portfolioSnapshots {
				...STPortfolioSnapshotFragment
			}
			transactionSnapshots {
				...STTransactionSnapshotFragment
			}
		}
		userPrivateData {
			...StUserPrivateData
			tickets {
				...STTicketFragment
			}
		}
		stockWatchlist {
			...STStockWatchlistFragment
		}
	}
}

query QueryUserIdentificationByUsername($usernamePrefix: String!) {
	queryUserPublicDataByUsername(usernamePrefix: $usernamePrefix) {
		...STUserIndentificationData
	}
}

query QueryStGroupMemberOverviewById($id: String!) {
	queryUserPublicDataById(id: $id) {
		...StGroupMemberOverview
	}
}

query QueryStUserPublicDataSearchById($id: String!) {
	queryUserPublicDataById(id: $id) {
		...StUserPublicDataSearch
	}
}

query QueryStUserAdminInformationById($id: String!) {
	queryUserPublicDataById(id: $id) {
		...StUserDataAdmin
	}
}

# -------------------------------------------------------
# MUTATIONS
mutation RegisterUser($stUserAuthenticationInput: STUserAuthenticationInput!) {
	registerUser(user: $stUserAuthenticationInput)
}

mutation EditUser($editInput: STUserEditDataInput!) {
	editUser(editInput: $editInput)
}

mutation ResetUserAccount($userId: String!) {
	resetUserAccount(userId: $userId) {
		date
		portfolioTotal
	}
}
