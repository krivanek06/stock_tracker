fragment STUserIndetificationFragment on STUserIndetification {
    id
    nickName
    locale
    photoURL
    accountCreatedDate
}

fragment STUserPublicDataFragment on STUserPublicData {
    id
    nickName
    locale
    photoURL
    accountCreatedDate
    lastSignInDate
    portfolioCash
    rank {
        ...STRankFragment
    }
    holdings {
        ...STTransactionFragment,
    }
    transactionsSnippets {
        ...STTransactionFragment
    }
    activity
}

query AuthenticateUser($id: String!) {
    authenticateUser(id: $id) {
        id
        nickName
        locale
        photoURL
        accountCreatedDate
        lastSignInDate
        portfolioCash
        rank {
            ...STRankFragment
        }
        transactionsSnippets {
            ...STTransactionFragment
        }
        holdings {
            ...STTransactionFragment
            summary {
                ...StockSummaryFragment
            }
        }
        groups {
            groupInvitationSent {
                ...STGroupPartialDataFragment
            }
            groupInvitationReceived {
                ...STGroupPartialDataFragment
            }
            groupOwner {
                ...STGroupPartialDataFragment
            }
            groupMember {
                ...STGroupPartialDataFragment
            }
        }
        lastPortfolioSnapshot {
            ...STPortfolioSnapshotFragment
        }
        lastTransactionSnapshot {
            ...STTransactionSnapshotFragment
        }
        activity
        userHistoricalData {
            userLogs {
                ...STLogsFragment
            }
            resetedAccount {
                date
                portfolioTotal
            }
            bestAchievedRanks {
                ...STRankFragment
            }
            portfolioSnapshots {
                ...STPortfolioSnapshotFragment
            }
            transactionSnapshots {
                ...STTransactionSnapshotFragment
            }
        }
        userPrivateData {
            tradingEnabledDate
            finnhubKey
            roles
            email
            displayName
            providerId
            status
            nicknameLastChange
        }
        stockWatchlist {
            ...STStockWatchlistFragment
        }
    }
}



query QueryUserPublicDataByUsername($usernamePrefix: String!) {
    queryUserPublicDataByUsername(usernamePrefix: $usernamePrefix) {
        ...STUserPublicDataFragment
    }
}



# -------------------------------------------------------
# MUTATIONS
mutation RegisterUser($stUserAuthenticationInput: STUserAuthenticationInput!) {
    registerUser(user: $stUserAuthenticationInput)
}

mutation EditUser($editInput: STUserEditDataInput!) {
    editUser(editInput: $editInput)
}

mutation ResetUserAccount($userId: String!) {
    resetUserAccount(userId: $userId) {
        date
        portfolioTotal
    }
}

