fragment STGroupUserFragment on STGroupUser {
    sinceDate
    user {
        ...STUserPartialInformationFragment
    }
}

fragment STGroupPartialDataFragment on STGroupPartialData {
    groupId
    name
    description
    portfolio {
        ...STPortfolioFragment
    }
    owner {
        ...STGroupUserFragment
    }
    lastUpdateDate
    lastEditedDate
    createdDate
    currentAchievedRanks {
        ...STRankFragment
    }
}


fragment STGroupAllDataFragment on STGroupAllData {
    groupId
    name
    description
    imageUrl
    imagePath
    portfolio {
        ...STPortfolioFragment
    }
    owner {
        ...STGroupUserFragment
    }
    lastUpdateDate
    lastEditedDate
    createdDate
    currentAchievedRanks {
        ...STRankFragment
    }
    bestAchievedRanks {
        ...STRankFragment
    }
    topTransactions {
        ...STTransactionFragment
    }
    lastTransactions {
        ...STTransactionFragment
    }
    groupLogs {
        ...STLogsFragment
    }
    portfolioChart {
        ...STPortfolioFragment
    }
    managers {
        ...STGroupUserFragment
    }
    members {
        ...STGroupUserFragment
    }
    invitationSent {
        ...STGroupUserFragment
    }
    invitationReceived {
        ...STGroupUserFragment
    }
}

# --------------------------------------
# QUERY

query QuerySTGroupAllDataByGroupId($groupId: String!) {
    querySTGroupAllDataByGroupId(groupId: $groupId) {
        ...STGroupAllDataFragment
    }
}

query QuerySTGroupPartialDataByGroupName($groupName: String!) {
    querySTGroupPartialDataByGroupName(groupName: $groupName) {
        groups {
            ...STGroupPartialDataFragment
        }
    }
}


# --------------------------------------
# MUTATION

mutation CreateGroup($groupInput: STGroupAllDataInput!){
    createGroup(groupInput: $groupInput){
        ...STGroupPartialDataFragment
    }
}

mutation EditGroup($groupInput: STGroupAllDataInput!){
    editGroup(groupInput: $groupInput){
        ...STGroupPartialDataFragment
    }
}

mutation DeleteGroup($uid: String!, $groupId: String!){
    deleteGroup(uid:$uid, groupId: $groupId)
}

mutation ToggleInvitationRequestToGroup($uid: String!, $groupId: String!){
    toggleInvitationRequestToGroup(uid:$uid, groupId: $groupId){
        ...STGroupPartialDataFragment
    }
}

mutation AnswerReceivedGroupInvitation($uid: String!, $groupId: String!, $accept: Boolean!){
    answerReceivedGroupInvitation(uid:$uid, groupId: $groupId, accept: $accept){
        ...STGroupPartialDataFragment
    }
}

mutation LeaveGroup($uid: String!, $groupId: String!){
    leaveGroup(uid:$uid, groupId: $groupId)
}
