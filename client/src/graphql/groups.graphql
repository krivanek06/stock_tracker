fragment STGroupUserFragment on STGroupUser {
    id
    nickName
    locale
    photoURL
    accountCreatedDate
    lastPortfolioSnapshot {
        ...STPortfolioSnapshotFragment
    }
    lastPortfolioIncreaseNumber
    lastPortfolioIncreasePrct
    numberOfExecutedTransactions
    lastTransactionSnapshot {
        ...STTransactionSnapshotFragment
    }
    previousPosition
    currentPosition
    startingPortfolioSnapshot {
        ...STPortfolioSnapshotFragment
    }
    sinceDate
}

fragment STGroupIdentificationData on STGroupAllData {
    groupId
    name
    description
    imagePath
    imageUrl
    owner {
        ...STGroupUserFragment
    }
    lastPortfolioSnapshot {
        ...STPortfolioSnapshotFragment
    }
    lastTransactionSnapshot {
        ...STTransactionSnapshotFragment
    }
    startDate
    endDate
    isInfinite
    isPrivate
    numberOfExecutedTransactions
    numberOfMembers
    startedBalance
    topMembers {
        ...STGroupUserFragment
    }
    lastUpdateDate
    lastEditedDate
    createdDate
    currentAchievedRanks {
        ...STRankFragment
    }
}

fragment STGroupAllDataFragment on STGroupAllData {
    groupId
    name
    description
    imageUrl
    imagePath
    portfolioSnapshots {
        ...STPortfolioSnapshotFragment
    }
    owner {
        ...STGroupUserFragment
    }
    lastUpdateDate
    lastEditedDate
    createdDate
    startDate
    endDate
    isPrivate
    isInfinite
    numberOfExecutedTransactions
    numberOfMembers
    startedBalance
    holdings {
        ...STTransactionFragment
    }
    lastTransactionSnapshot {
        ...STTransactionSnapshotFragment
    }
    lastPortfolioSnapshot {
        ...STPortfolioSnapshotFragment
    }
    currentAchievedRanks {
        ...STRankFragment
    }
    bestAchievedRanks {
        ...STRankFragment
    }
    topTransactions {
        ...STTransactionFragment
    }
    lastTransactions {
        ...STTransactionFragment
    }
    groupLogs {
        ...STLogsFragment
    }
    managers {
        ...STGroupUserFragment
    }
    members {
        ...STGroupUserFragment
    }
    invitationSent {
        ...STGroupUserFragment
    }
    invitationReceived {
        ...STGroupUserFragment
    }
}


# --------------------------------------
# QUERY

query QuerySTGroupAllDataByGroupId($groupId: String!) {
    querySTGroupAllDataByGroupId(groupId: $groupId) {
        ...STGroupAllDataFragment
    }
}

query QuerySTGroupPartialDataByGroupName($groupName: String!) {
    querySTGroupPartialDataByGroupName(groupName: $groupName) {
        groups {
            ...STGroupIdentificationData
        }
    }
}


# --------------------------------------
# MUTATION

mutation CreateGroup($groupInput: STGroupAllDataInput!){
    createGroup(groupInput: $groupInput){
        ...STGroupIdentificationData
    }
}

mutation EditGroup($groupInput: STGroupAllDataInput!){
    editGroup(groupInput: $groupInput){
        ...STGroupIdentificationData
    }
}

mutation DeleteGroup($uid: String!, $groupId: String!){
    deleteGroup(uid:$uid, groupId: $groupId)
}

mutation ToggleInvitationRequestToGroup($uid: String!, $groupId: String!){
    toggleInvitationRequestToGroup(uid:$uid, groupId: $groupId){
        ...STGroupIdentificationData
    }
}

mutation AnswerReceivedGroupInvitation($uid: String!, $groupId: String!, $accept: Boolean!){
    answerReceivedGroupInvitation(uid:$uid, groupId: $groupId, accept: $accept){
        ...STGroupIdentificationData
    }
}

mutation LeaveGroup($uid: String!, $groupId: String!){
    leaveGroup(uid:$uid, groupId: $groupId)
}
