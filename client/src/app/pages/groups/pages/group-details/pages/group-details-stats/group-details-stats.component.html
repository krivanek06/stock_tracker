<ion-grid *ngIf="groupAllData$ | async as groupData">
	<!-- portfolio growth + cash and invested percentage -->
	<ion-toolbar class="ion-hide-lg-down">
		<ion-title class="st-title"> Portfolio </ion-title>
	</ion-toolbar>

	<!-- portfolio growth chart -->
	<ion-row class="mt-6 lg:mt-0">
		<ion-col size="12">
			<app-portfolio-growth-chart [heightPx]="chartHeight_32" [stPortfolioSnapshots]="groupData.groupHistoricalData.portfolioSnapshots">
			</app-portfolio-growth-chart>
		</ion-col>
	</ion-row>

	<!-- holdings allocation charts -->
	<ion-row class="ion-hide-md-down">
		<ion-col size="12">
			<app-generic-list [iconTitle]="'pricetags'" [title]="'Holdings'"></app-generic-list>
			<app-holdings-allocation-group-chart [heightPx]="chartHeightGroup_37" [holdings]="groupData.groupMemberData.holdings" [showTitle]="true">
			</app-holdings-allocation-group-chart>
		</ion-col>
	</ion-row>

	<ng-container *ngIf="holdings$ | async as holdings">
		<!-- packed buble chart -->
		<ion-row class="my-6 ion-hide-md-down">
			<ion-col size="12">
				<app-holdings-packed-buble-chart [holdings]="holdings" [heightPx]="chartHeightGroup_55"></app-holdings-packed-buble-chart>
			</ion-col>
		</ion-row>

		<ion-row *ngIf="holdings.length > 0" class="ion-justify-content-around my-6">
			<!-- holding pie chart -->
			<ion-col size="12" size-md="6">
				<app-pie-chart-wrapper
					*ngIf="holdings.length < 12; else showInvested"
					[data]="holdings | holdingsToPortfolioChartSeries:  groupData.portfolio.lastPortfolioSnapshot.portfolioCash"
					[heightPx]="chartHeight_32"
					chartTitle="Holdings allocation"
				>
				</app-pie-chart-wrapper>

				<!-- invested & cash chart -->
				<ng-template #showInvested>
					<app-pie-chart-wrapper
						*ngIf="groupData.portfolio.lastPortfolioSnapshot.portfolioInvested > 0"
						[heightPx]="chartHeight_32"
						chartTitle="Portfolio allocation"
						[data]="[
							{name: 'Invested', color: '#5e00df', y: 100 / (groupData.portfolio.lastPortfolioSnapshot.portfolioInvested + groupData.portfolio.lastPortfolioSnapshot.portfolioCash) * groupData.portfolio.lastPortfolioSnapshot.portfolioInvested, sliced: true},
							{name: 'Cash', color: '#c7481a', y: 100 / (groupData.portfolio.lastPortfolioSnapshot.portfolioInvested + groupData.portfolio.lastPortfolioSnapshot.portfolioCash) * groupData.portfolio.lastPortfolioSnapshot.portfolioCash}
						]"
					>
					</app-pie-chart-wrapper>
				</ng-template>
			</ion-col>

			<!-- sector pie chart -->
			<ion-col size="12" size-md="6" class="ion-hide-sm-down">
				<app-pie-chart-wrapper [data]="holdings | holdingsToSectorChartSeries" [heightPx]="chartHeight_32" chartTitle="holdings">
				</app-pie-chart-wrapper>
			</ion-col>
		</ion-row>

		<!-- holdings tabls -->
		<app-composed-portfolio-holdings-table
			[title]="'Group symbol holdings: ' + holdings.length"
			[totalPortfolio]="groupData.portfolio.lastPortfolioSnapshot.portfolioInvested + groupData.portfolio.lastPortfolioSnapshot.portfolioCash"
			[holdings]="holdings"
			[showHoldingNumber]="false"
		>
		</app-composed-portfolio-holdings-table>
	</ng-container>
</ion-grid>
