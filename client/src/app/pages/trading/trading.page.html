<ion-content class="ion-padding">
    <!-- menu page header -->
    <app-menu-header></app-menu-header>

    <!-- header -->
    <app-header [pageIcon]="'analytics'" [pageName]="'Trading'"></app-header>

    <!-- body -->
    <ion-grid class="ion-margin-top">
        <ion-row class="ion-justify-content-center ion-margin-bottom">
            <ion-col size="12" size-md="6" size-lg="6.5" size-xl="6">
                <!-- search symbol -->
                <app-stock-search
                        [clearOnClick]="true"
                        (clickedSymbolEmitter)="changeSummary($event)">
                </app-stock-search>
            </ion-col>
            <ion-col size-md="6" size-lg="4.5" size-xl="4" class="portfolio-container-col ion-hide-md-down">
                <!-- portfolio state -->
                <app-portfolio-state
                        style="margin-top: -35px"
                        [portfolioState]="PortfolioStateEnum.PARTIAL"
                        [portfolioCash]="user?.portfolioCash"
                        [portfolioInvested]="portfolioInvested">
                </app-portfolio-state>
            </ion-col>
        </ion-row>
        <ion-row class="ion-justify-content-center" *ngIf="selectedSummary">
            <!-- financial chart -->
            <ion-col size="12" size-lg="7" size-xl="6">
                <app-financial-chart-container
                        [currentPrice]="selectedSummary.marketPrice"
                        [closedPrice]="selectedSummary.previousClose"
                        [logoUrl]="selectedSummary.logo_url"
                        [name]="selectedSummary.longName"
                        [height]="460"
                        [symbol]="selectedSummary.symbol">
                </app-financial-chart-container>
            </ion-col>
            <!-- summary -->
            <ion-col size="12" size-lg="4" size-xl="4">
                <app-generic-list [iconTitle]="'barcode-outline'" [title]="'Summary'"></app-generic-list>
                <app-generic-card>
                    <!-- symbol summary -->
                    <app-stock-summary-container [summary]="selectedSummary"></app-stock-summary-container>

                    <!-- buttons -->
                    <ion-buttons class="st-buttons-container st-justify-center">
                        <ion-button class="st-button st-create-background" (click)="tradeSymbol()">
                            Trade
                        </ion-button>
                    </ion-buttons>
                </app-generic-card>
            </ion-col>
        </ion-row>

        <ion-row class="ion-justify-content-center">
            <!-- holdings -->
            <ion-col size="12" size-lg="11" size-xl="10">
                <app-generic-list [title]="'Holdings'" [iconTitle]="'pricetags'"></app-generic-list>
                <app-generic-card>
                    <app-holdings-table
                            [totalPortfolio]="user?.portfolioCash + portfolioInvested"
                            [stTransactions]="clonedHoldings"
                            (itemClickedEmitter)="changeSymbol($event)">
                    </app-holdings-table>
                </app-generic-card>
            </ion-col>
        </ion-row>

        <!-- suggestion -->
        <ion-row class="ion-justify-content-center">
            <ion-col size="12" size-lg="11" size-xl="10">
                <ion-list-header>
                    <ion-label style="margin-left: 8px">
                        <ion-text class="st-title">Suggestions</ion-text>
                    </ion-label>
                </ion-list-header>
                <ion-row>
                    <ion-col size="12" size-sm="6" size-lg="4" size-xl="3" *ngFor="let suggestion of suggestions">
                        <!-- suggestion in card with ripple effect -->
                        <app-generic-card (click)="changeSummary(suggestion.summary)"
                                          [applyLeftPadding]="false"
                                          [additionalClasses]="'st-height-100 ion-activatable'">
                            <app-details-stock-suggestion-change
                                    [suggestionMarketPrice]="suggestion.summary.marketPrice"
                                    [suggestion]="suggestion">
                            </app-details-stock-suggestion-change>

                            <!-- ripple effect on click -->
                            <ion-ripple-effect></ion-ripple-effect>
                        </app-generic-card>
                    </ion-col>
                </ion-row>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>

