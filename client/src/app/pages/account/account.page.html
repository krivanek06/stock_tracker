<ion-content class="ion-padding">
	<!-- menu page header -->
	<app-menu-header></app-menu-header>

	<!-- header -->
	<app-header pageIcon="person" pageName="Account management"></app-header>

	<ion-grid>
		<ion-row class="ion-justify-content-center">
			<ion-col size="12" size-lg="11" size-xl="10" style="overflow: visible">
				<ng-container *ngIf="user$ | async as user">
					<ion-row class="ion-justify-content-center">
						<!-- account form -->
						<ion-col size="12" size-lg="8" size-md="7">
							<app-generic-card [additionalClasses]="'st-height-100'" [title]="'Account Information'">
								<app-user-account-form (submitClickedEmitter)="editUser($event)" [user]="user"> </app-user-account-form>
							</app-generic-card>
						</ion-col>
						<ion-col size="12" size-lg="4" size-md="5">
							<ion-row>
								<!-- assigned roles -->
								<ion-col size="12">
									<app-generic-card title="Assigned roles" class="ion-margin-bottom">
										<ion-item-group *ngIf="user.userPrivateData.roles.length > 0">
											<ion-item class="st-display-flex-center st-font-size-14" *ngFor="let name of user.userPrivateData.roles">
												<ion-label class="ion-text-center st-font-3"> {{ name }} </ion-label>
											</ion-item>
										</ion-item-group>
									</app-generic-card>
								</ion-col>

								<!-- reseted account -->
								<ion-col size="12" *ngIf="user.userPrivateData.finnhubKey">
									<app-generic-card title="Account resets">
										<app-user-account-reseted-info
											*ngIf="user.userHistoricalData.resetedAccount.length > 0"
											(resetAccountEmitter)="resetAccount()"
											[resetedAccountInfo]="user.userHistoricalData.resetedAccount"
											[showResetButton]="!!user.userPrivateData.finnhubKey"
										>
										</app-user-account-reseted-info>
									</app-generic-card>
								</ion-col>

								<!-- account not activated message -->
								<ion-col size="12" *ngIf="!user.userPrivateData.finnhubKey">
									<app-user-account-not-activated-message></app-user-account-not-activated-message>
								</ion-col>
							</ion-row>
						</ion-col>
					</ion-row>

					<!-- ranks
						<ion-row class="st-width-90-center">
				
						</ion-row>  -->

					<!-- wachlists -->
					<ion-row class="ion-justify-content-center">
						<ion-col size="12" size-lg="8" size-md="7">
							<app-generic-card [title]="'Watchlist modification'">
								<app-watchlist-modification-container [watchlists]="user.stockWatchlist"> </app-watchlist-modification-container>
							</app-generic-card>
						</ion-col>
						<ion-col size="12" size-lg="4" size-md="5">
							<!-- empty for UI purpose -->
						</ion-col>
					</ion-row>

					<ion-row>
						<ion-col size="12" size-md="6">
							<app-generic-card title="Send ticket">
								<app-ticket-form-container></app-ticket-form-container>
							</app-generic-card>
						</ion-col>
						<ion-col size="12" size-md="6">
							<app-generic-card title="Latest notifications"> </app-generic-card>
						</ion-col>
					</ion-row>

					<ion-row class="ion-margin-top">
						<ion-col size="12">
							<div class="st-title st-bottom-space">My tickets</div>
							<app-ticket-overview-container [tickets]="user.userPrivateData.tickets"></app-ticket-overview-container>
						</ion-col>
					</ion-row>
				</ng-container>
			</ion-col>
		</ion-row>
	</ion-grid>
</ion-content>
