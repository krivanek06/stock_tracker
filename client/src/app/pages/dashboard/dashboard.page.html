<ion-content class="ion-padding">
	<!-- menu page header -->
	<app-menu-header></app-menu-header>

	<!-- header -->
	<app-header pageIcon="grid" pageName="Dashboard"></app-header>

	<ion-grid>
		<ion-row class="ion-justify-content-center">
			<ion-col size="12" size-lg="11" size-xl="10" style="overflow: visible">
				<!-- portfolio state -->
				<ion-row class="ion-justify-content-center">
					<ion-col size="12">
						<app-portfolio-state [portfolioCash]="user.portfolio.portfolioCash" [portfolioInvested]="portfolioInvested"> </app-portfolio-state>
					</ion-col>
				</ion-row>

				<!-- portfolio change  weekly / monthly etc. -->
				<app-dashboard-portfolio-change
					[lastPortfolioIncreaseNumber]="user.portfolio.lastPortfolioIncreaseNumber"
					[portfolioCash]="user.portfolio.portfolioCash"
					[portfolioInvested]="portfolioInvested"
					[stPortfolioSnapshots]="user.userHistoricalData.portfolioSnapshots"
				></app-dashboard-portfolio-change>

				<!-- portfolio change charts -->
				<ion-row class="ion-justify-content-center">
					<!-- portfolio growth chart -->
					<ion-col size="12" size-md="6" class="st-sm-border-bottom-with-space">
						<app-portfolio-growth-chart [heightPx]="260" [stPortfolioSnapshots]="user.userHistoricalData.portfolioSnapshots">
						</app-portfolio-growth-chart>
					</ion-col>

					<!-- portfolio change chart -->
					<ion-col size="12" size-md="6" class="st-sm-border-bottom-with-space">
						<app-portfolio-change-chart [heightPx]="260" [stPortfolioSnapshots]="user.userHistoricalData.portfolioSnapshots">
						</app-portfolio-change-chart>
					</ion-col>
				</ion-row>

				<!-- holdings table -->
				<ion-row class="ion-justify-content-center">
					<ion-col size="12">
						<app-generic-list [iconTitle]="'pricetags'" [title]="'Holdings'"></app-generic-list>
						<app-generic-card>
							<app-holdings-table
								(itemClickedEmitter)="showSummary($event)"
								[holdings]="clonedHoldings"
								[totalPortfolio]="portfolioInvested + user.portfolio.portfolioCash"
							>
							</app-holdings-table>
						</app-generic-card>
					</ion-col>
				</ion-row>

				<!-- holdings pie charts -->
				<ion-row *ngIf="user.holdings.length > 0" class="ion-margin-vertical ion-justify-content-around">
					<!-- holdings sector -->
					<ion-col size="12" size-md="6">
						<app-pie-chart-wrapper
							[data]="user.holdings | holdingsToSectorChartSeries"
							[heightPx]="300"
							chartTitle="holdings"
						></app-pie-chart-wrapper>
					</ion-col>

					<!-- holdings allocation -->
					<ion-col size="12" size-md="6">
						<app-pie-chart-wrapper
							[data]="user.holdings | holdingsToPortfolioChartSeries:  user.portfolio.portfolioCash"
							[heightPx]="300"
							chartTitle="Holdings allocation"
						></app-pie-chart-wrapper>
					</ion-col>
				</ion-row>

				<!-- transactions -->
				<ion-row class="ion-justify-content-center">
					<ion-col size="12" size-md="6">
						<app-generic-list [iconTitle]="'reader'" [title]="'Transactions'"></app-generic-list>
						<app-generic-card additionalStyles="min-height: 300px">
							<app-transactions-table [transactions]="user.transactionsSnippets | slice:0:5"> </app-transactions-table>
						</app-generic-card>
					</ion-col>
					<ion-col class="ion-padding" size="12" size-md="6">
						<app-transactions-chart [heightPx]="360" [stTransactionSnapshots]="user.userHistoricalData.transactionSnapshots">
						</app-transactions-chart>
					</ion-col>
				</ion-row>
			</ion-col>
		</ion-row>
	</ion-grid>
</ion-content>
