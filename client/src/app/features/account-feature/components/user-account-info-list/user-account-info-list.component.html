<ion-card
	*ngIf="(positionNumber !== undefined && positionNumber !== null) || showInCard; else showWithoutCard"
	(click)="clickedPerson()"
	class="ion-activatable"
	button
	[style.background-color]="cardBackgroundColor"
	[ngClass]="{
		'g-my-position': positionNumber !== undefined && positionNumber === myPosition && positionNumber !== 1 && positionNumber !== 2 && positionNumber !== 3,
		'g-first-position': positionNumber === 1,
		'g-second-position': positionNumber === 2,
		'g-third-position': positionNumber === 3
	}"
>
	<div class="flex gap-5 p-3 justify-between">
		<ng-container *ngTemplateOutlet="content"></ng-container>

		<!-- Position -->
		<span
			*ngIf="positionNumber"
			class="pt-2 text-2xl"
			[ngClass]="{
                    'st-font-purple': positionNumber !== 1 && positionNumber !== 2 && positionNumber !== 3,
                    'g-first-position-color': positionNumber === 1,
                    'g-second-position-color': positionNumber === 2,
                    'g-third-position-color': positionNumber === 3
                }"
			>#{{ positionNumber }}</span
		>
	</div>

	<ion-ripple-effect></ion-ripple-effect>
</ion-card>

<!-- data without card -->
<ng-template #showWithoutCard>
	<ng-container *ngTemplateOutlet="content"></ng-container>
</ng-template>

<!-- contact -->
<ng-template #content>
	<div *ngIf="stUserPublicData" class="user-info-item">
		<div
			(click)="clickedPerson()"
			[ngClass]="{
                'ion-activatable': clickable,
                'width-100': clickable
            }"
			class="flex p-2"
		>
			<ion-img appDefaultImg [src]="stUserPublicData.photoURL"></ion-img>
			<div class="ml-2">
				<span class="text-white text-lg">{{ stUserPublicData.nickName }}</span>

				<!-- portfolio state -->
				<div class="flex items-center gap-2">
					<span class="st-font-2 text-base">Portfolio:</span>
					<span class="st-font-0 text-base"> {{ stUserPublicData.portfolio.lastPortfolioBalance | currency }} </span>
				</div>
				<!-- portfolio change -->
				<div class="flex items-center gap-2">
					<span class="st-font-2 text-base">Change:</span>
					<app-price-change-item
						pricePosition="left"
						[isPercent]="true"
						[showDollarSignOnPrice]="true"
						[priceChange]="portfolioChange?.portfolioIncreasePrct"
						[price]="portfolioChange?.portfolioIncreaseNumber"
					>
					</app-price-change-item>
				</div>

				<ion-text class="st-font-5"> Since: {{ stUserPublicData.accountCreatedDate | date: 'dd.MM.yyyy' }} </ion-text>
			</div>
		</div>

		<!-- delete button  -->
		<div *ngIf="showDeleteButton">
			<ion-button (click)="deletePerson()" class="st-clickable" color="danger" fill="clear">
				<ion-icon name="trash-bin" slot="icon-only" style="font-size: 28px"></ion-icon>
			</ion-button>
		</div>
	</div>
</ng-template>
