<form [formGroup]="form">
	<!-- group image -->
	<ion-item-group class="c-uploader-wrapper">
		<div>
			<ion-item>
				<app-uploader
					#uploader
					(uploadedFilesEmitter)="uploadedImage($event)"
					[defaultUrl]="photoURL.value"
					[fileName]="user.id"
					[filePath]="'users'"
					[showInput]="true"
				>
				</app-uploader>
			</ion-item>
		</div>

		<div>
			<!-- display name -->
			<app-form-mat-input-wrapper inputCaption="Display name" controlName="displayName" [disabled]="true"> </app-form-mat-input-wrapper>

			<!-- email -->
			<app-form-mat-input-wrapper inputCaption="Email" inputType="EMAIL" controlName="email" [disabled]="true"> </app-form-mat-input-wrapper>
		</div>
	</ion-item-group>
	<!-- locale -->
	<app-form-mat-input-wrapper inputCaption="Locale" controlName="locale" [disabled]="true"> </app-form-mat-input-wrapper>

	<!-- nickName -->
	<app-form-mat-input-lock-wrapper inputCaption="NickName" controlName="nickName"> </app-form-mat-input-lock-wrapper>

	<!-- finnhubKey -->
	<app-form-mat-input-lock-wrapper
		inputCaption="Finnhub key"
		controlName="finnhubKey"
		[highlightField]="!finnhubKey.value"
	></app-form-mat-input-lock-wrapper>

	<!-- messages -->
	<ng-container *ngIf="finhubValidity$ | async as finhubValidity">
		<div class="st-normal-message" *ngIf="finhubValidity === 'PENDING' ">Checking your API key validity</div>
		<div class="st-error-message" *ngIf="finhubValidity === 'INVALID' ">Your API key is invalid</div>
	</ng-container>

	<!-- submit button -->
	<ion-buttons class="st-buttons-container">
		<ion-button
			[disabled]="(!nickName.disabled && nickName.invalid) || (!finnhubKey.disabled && (finhubValidity$ | async) !== 'VALID') "
			(click)="submit()"
			*ngIf="formWasEdited"
			class="st-button st-width-full-md-screen"
			color="primary"
			fill="solid"
		>
			Save
		</ion-button>
	</ion-buttons>
</form>
