<div class="flex justify-end sm:hidden p-2">
	<button mat-stroked-button class="g-color-primary" (click)="toggleDailyChange()">{{ showDailyChange ? 'Daily +/-' : 'Unrealized +/-'}}</button>
</div>
<table mat-table [dataSource]="dataSource" matSort class="w-full" [trackBy]="identify">
	<!-- image & name -->
	<ng-container matColumnDef="symbol">
		<th mat-header-cell *matHeaderCellDef class="hidden sm:table-cell">Symbol</th>
		<td mat-cell *matCellDef="let row">
			<!-- logo + symbol -->
			<div class="flex items-center">
				<img [src]="row.summary.logo_url" appDefaultImg class="st-symbol-image" />
				<div class="flex flex-col">
					<span class="g-color-white">{{ row.symbol }}</span>
					<span class="text-base text-gray-500 table-cell sm:hidden">
						<span [@marketValueChange]="row.summary.marketPrice" class="text-gray-500 text-base">{{ row.summary.marketPrice | currency }}</span> * {{
						row.units }} | {{ row.breakEvenPrice | currency }}
					</span>
				</div>
			</div>
		</td>
	</ng-container>

	<!-- price -->
	<ng-container matColumnDef="price">
		<th mat-header-cell *matHeaderCellDef class="hidden sm:table-cell">Price</th>
		<td mat-cell *matCellDef="let row" [@marketValueChange]="row.summary.marketPrice" class="hidden sm:table-cell">
			{{ row.summary.marketPrice | currency }}
		</td>
	</ng-container>

	<!-- BEP. -->
	<ng-container matColumnDef="bep">
		<th mat-header-cell *matHeaderCellDef class="hidden sm:table-cell">Bep.</th>
		<td mat-cell *matCellDef="let row" class="hidden sm:table-cell">{{ row.breakEvenPrice | currency }}</td>
	</ng-container>

	<!-- daily change. -->
	<ng-container matColumnDef="daily">
		<th mat-header-cell *matHeaderCellDef class="hidden sm:table-cell">Daily +/-</th>
		<td mat-cell *matCellDef="let row" class="hidden sm:table-cell">
			<app-price-compare-item [currentPrice]="row.summary.marketPrice * row.units" [compareToPrice]="row.summary.previousClose * row.units">
			</app-price-compare-item>
		</td>
	</ng-container>

	<!-- total change -->
	<ng-container matColumnDef="total">
		<th mat-header-cell *matHeaderCellDef class="hidden sm:table-cell">Total +/-</th>
		<td mat-cell *matCellDef="let row" class="hidden sm:table-cell">
			<app-price-compare-item [currentPrice]="row.summary.marketPrice * row.units" [compareToPrice]="row.breakEvenPrice * row.units">
			</app-price-compare-item>
		</td>
	</ng-container>

	<!-- value -->
	<ng-container matColumnDef="value">
		<th mat-header-cell *matHeaderCellDef class="hidden sm:table-cell">Value</th>
		<td mat-cell *matCellDef="let row">
			<div [@marketValueChange]="row.summary.marketPrice" class="text-right sm:text-left">{{ (row.summary.marketPrice * row.units) | currency }}</div>
			<div class="text-gray-500 text-sm hidden sm:table-cell">{{ row.summary.marketPrice | currency }} * {{ row.units }}</div>
			<!-- daily / total change on small screen -->
			<div class="flex justify-end sm:hidden">
				<app-price-compare-item
					pricePosition="right"
					[currentPrice]="row.summary.marketPrice * row.units"
					[compareToPrice]="showDailyChange ? (row.summary.previousClose * row.units) : (row.breakEvenPrice * row.units)"
				>
				</app-price-compare-item>
			</div>
		</td>
	</ng-container>

	<!-- units -->
	<ng-container matColumnDef="units">
		<th mat-header-cell *matHeaderCellDef class="hidden lg:table-cell">Units</th>
		<td mat-cell *matCellDef="let row" class="hidden lg:table-cell">{{ row.units }}</td>
	</ng-container>

	<!-- portfolio % -->
	<ng-container matColumnDef="portfolio">
		<th mat-header-cell *matHeaderCellDef class="hidden md:table-cell">Portfolio %</th>
		<td mat-cell *matCellDef="let row" class="hidden md:table-cell">
			{{ totalPortfolio ? ((row.summary.marketPrice * row.units / totalPortfolio | percent: '1.2-2')) : 'N/A' }}
		</td>
	</ng-container>

	<!-- beta -->
	<ng-container matColumnDef="beta">
		<th mat-header-cell *matHeaderCellDef class="hidden xl:table-cell">Beta</th>
		<td mat-cell *matCellDef="let row" class="hidden xl:table-cell">{{ row.summary.beta ? ( row.summary.beta | number: '1.2-2') : 'N/A' }}</td>
	</ng-container>

	<!-- recommendation -->
	<ng-container matColumnDef="Recommend">
		<th mat-header-cell *matHeaderCellDef class="hidden lg:table-cell">Recommend</th>
		<td mat-cell *matCellDef="let row" class="hidden lg:table-cell">
			<span appRecommendation [recommendationKey]="row.summary.recommendationKey" [recommendationMean]="row.summary.recommendationMean"> </span>
		</td>
	</ng-container>

	<tr mat-header-row *matHeaderRowDef="displayedColumns" class="hidden sm:contents"></tr>
	<tr mat-row *matRowDef="let row; columns: displayedColumns" (click)="itemClicked(row)"></tr>

	<!-- Row shown when there is no matching data. -->
	<tr class="mat-row" *matNoDataRow>
		<td class="mat-cell" colspan="10">
			<app-list-skeleton [itemLength]="10"></app-list-skeleton>
		</td>
	</tr>
</table>
